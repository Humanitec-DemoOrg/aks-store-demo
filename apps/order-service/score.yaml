apiVersion: score.dev/v1b1
metadata:
  name: order-service
containers:
  order-service:
    image: ghcr.io/azure-samples/aks-store-demo/order-service:1.3.0
    variables:
      ORDER_QUEUE_HOSTNAME: "${resources.order-queue.host}"
      ORDER_QUEUE_PORT: "${resources.order-queue.port}"
      ORDER_QUEUE_USERNAME: "${resources.order-queue.username}"
      ORDER_QUEUE_PASSWORD: "${resources.order-queue.password}"
      ORDER_QUEUE_NAME: "orders"
      FASTIFY_ADDRESS: "0.0.0.0"
    livenessProbe:
      httpGet:
        path: /health
        port: 3000
    readinessProbe:
      httpGet:
        path: /health
        port: 3000
    resources:
      limits:
        memory: "128Mi"
        cpu: "75m"
      requests:
        memory: "50Mi"
        cpu: "1m"
service:
  ports:
    grpc:
      port: 3000
      targetPort: 3000
resources:
  order-queue:
    type: amqp