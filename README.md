# aks-store-demo

Get the [Azure-Samples/aks-store-demo](https://github.com/Azure-Samples/aks-store-demo) to Score and Humanitec.

[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/Humanitec-DemoOrg/aks-store-demo)

![](https://github.com/Azure-Samples/aks-store-demo/raw/main/assets/demo-arch.png)

## Local deployment

You will need to [install `score-compose`](https://docs.score.dev/docs/score-implementation/score-compose/) locally.

Deploy locally:
```bash
make compose-up
```

## Humanitec deployment

You will need to [install `humctl`](https://developer.humanitec.com/platform-orchestrator/cli/) locally.

Deploy to Humanitec:
```bash
export HUMANITEC_ORG=FIXME
export HUMANITEC_APPLICATION=store-front
export HUMANITEC_ENVIRONMENT=development

humctl login

humctl create app ${HUMANITEC_APPLICATION} \
    --name ${HUMANITEC_APPLICATION}

humctl apply \
    -f resources/in-cluster-rabbitmq.yaml
humctl apply \
    -f resources/in-cluster-mongodb.yaml

make humanitec-deploy
```

Get the generated DNS one the deployment is done:
```bash
humctl get active-resources \
    --app ${HUMANITEC_APPLICATION} \
    --env ${HUMANITEC_ENVIRONMENT} \
    -o json \
    | jq -c '.[] | select(.metadata.type | contains("dns"))' \
    | jq -r .status.resource.host
```

Here is the associated resource graph generated by Humanitec:
```bash
humctl resources graph \
    --app ${HUMANITEC_APPLICATION} \
    --env ${HUMANITEC_ENVIRONMENT}
```

![](docs/demo-arch-graph.png)